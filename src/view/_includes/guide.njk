{% extends "default.njk" %}

{% set nav %}
  {% set previousGuide = collections.guides | getPreviousCollectionItem(page) %}
  {% set nextGuide = collections.guides | getNextCollectionItem(page) %}

  <nav class="pagination">
    {% if previousGuide %}
      <a href="{{previousGuide.url}}">Previous: {{previousGuide.data.title}}</a>
    {% endif %}
    {% if nextGuide %}
      <a href="{{nextGuide.url}}" class="pagination__next">Next: {{nextGuide.data.title}}</a>
    {% endif %}
  </nav>
{% endset %}

{% block main %}

  {% if author or contributors %}
    <p class="byline">
      {% if author %}Guide written by <strong>{{ author }}</strong>.{% endif %}
      {% if contributors %}Contributions from <strong>{{ contributors }}</strong>.{% endif %}
  {% endif %}

  {% if cts %}
    <p class="draft-warning">
      This guide is not for how to make CTs.
      This guide is for strategies and how to progress with CTs.
      For help with CT development, check out <strong>#custom-theories-dev</strong> in the <a href="https://discord.gg/3FqMuzuf4t">Discord</a>.
      Explanation of each CTs' mathematical basis are to be found in-game.
      Only official CTs will be added to the guide with exception of QoL.
  {% endif %}

  {% if draft %}
    <p class="draft-warning">
      This guide is currently undergoing change.
      Keep in mind, <strong>strategies may change</strong>.
  {% endif %}

  {{ content | safe }}
{% endblock %}

{% block sidebar %}
  {% if not home %}
    {% set tocs = content | toc %}
    {% if tocs %}
      <div id="HeaderSidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
        <h1 class="sidebartitle">Table of Contents</h1>
        <div class="content_wrapper square_list">
          {{content|toc|safe}}
        </div>
      </div>
      <div id="HeaderSidebarinvis" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
        <h1 class="sidebartitle">Table of Contents</h1>
        <div class="content_wrapper square_list">
          {{content|toc|safe}}
        </div>
      </div>
    {% else %}
      <div id="HeaderSidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
        <h1 class="sidebartitle">Table of Contents</h1>
        <div class="content_wrapper square_list">
          <p>No headers have been established.<br>Please add headers for Table of Contents.</p>
        </div>
      </div>
      <div id="HeaderSidebarinvis" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
        <h1 class="sidebartitle">Table of Contents</h1>
        <div class="content_wrapper square_list">
          <p>No headers have been established.<br>Please add headers for Table of Contents.</p>
        </div>
      </div>
    {% endif %}

    <div id="GuideSidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Guides</h1>
      <div class="content_wrapper square_list">
        <ul>
          {%- for guide in collections.guides -%}
            <li>
              <a href="{{guide.url}}">{{ guide.data.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </div>
    <div id="GuideSidebarinvis" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Guides</h1>
      <div class="content_wrapper square_list">
        <ul>
          {%- for guide in collections.guides -%}
            <li>
              <a href="{{guide.url}}">{{ guide.data.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </div>

    <div id="ResourceSidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Resources</h1>
      <div class="content_wrapper square_list">
        {% include 'tools.njk' %}
      </div>
    </div>
    <div id="ResourceSidebarinvis" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">ⓧ</a>
      <h1 class="sidebartitle">Resources</h1>
      <div class="content_wrapper square_list">
        {% include 'tools.njk' %}
      </div>
    </div>

    
    <div id="SidebarHeaders" class="sidebar">
      <h1 class="sidebartitle">More Guides ⓧ</h1>
      <h1 class="sidebartitle">Table of Contents ⓧ</h1>
      <h1 class="sidebartitle">Other Resources ⓧ</h1>
    </div>

    <div id="sidebarmain">
      <div>
        <button class="openbtn" onclick="openSidebar(['GuideSidebar','HeaderSidebar','ResourceSidebar'],'SidebarHeaders')">☰More Guides</button>
      </div>
      <div>
        <button class="openbtn" onclick="openSidebar(['HeaderSidebar','GuideSidebar','ResourceSidebar'],'SidebarHeaders')">☰Table of <span style="display:inline-block;">Contents</span></button>
      </div>
      <div>
        <button class="openbtn" onclick="openSidebar(['ResourceSidebar','GuideSidebar','HeaderSidebar'],'SidebarHeaders')">☰Other Resources</button>
      </div>
    </div>
  {% endif %}
{% endblock %}